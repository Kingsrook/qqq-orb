description: >
  Builds the React application
  - Restores Maven dependency cache
  - Installs Chrome/ChromeDriver for browser testing
  - Compiles the project with Maven
  - Saves Maven cache for future builds
steps:
  - run:
      name: Setup Maven Settings
      command: <<include(scripts/setup_maven_settings.sh)>>
  - restore_cache:
      keys:
        - v1-dependencies-{{ checksum "pom.xml" }}
        - v1-npm-dependencies-{{ checksum "package.json" }}
  - run:
      name: Setup NPM authentication
      command: |
        echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" >> ~/.npmrc
  - run:
      name: Install Node.js dependencies
      command: |
        npm install --legacy-peer-deps
  - run:
      name: Run Maven Compile
      command: <<include(scripts/frontend_build_compile.sh)>>
  - run:
      name: Build React application
      command: |
        npm run build
  - save_cache:
      paths:
        - ~/.m2
        - node_modules
      key: v1-dependencies-{{ checksum "pom.xml" }}
  - save_cache:
      paths:
        - node_modules
      key: v1-npm-dependencies-{{ checksum "package.json" }}
