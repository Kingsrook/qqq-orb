description: >
  Publishes artifacts to Maven Central (Sonatype Central Portal)
  - Restores Maven dependency cache
  - Debugs Maven settings to verify configuration
  - Sets up GPG signing for artifact verification
  - Deploys signed artifacts to Maven Central using release profile
  - Saves Maven cache for future builds

steps:
  - run:
      name: Setup GPG for signing
      command: <<include(scripts/mvn_jar_deploy_gpg_setup.sh)>>
  - run:
      name: Publish to Sonatype Central (releases and SNAPSHOTs)
      command: <<include(scripts/mvn_jar_deploy_deploy.sh)>>
  - save_cache:
      paths:
        - ~/.m2
      key: v1-dependencies-{{ checksum "pom.xml" }}
