description: >
  Publishes hotfix releases to Maven Central and creates GitHub releases
  Used by: hotfix_release workflow for hotfix/* branches
  Publishes: X.Y.(Z+1) versions to releases repository
  Creates: Git tags and GitHub releases automatically

executor: localstack/default

parameters:
  include_integrated_frontend_build:
    type: boolean
    default: false
    description: "Include frontend build, test, and package steps"

steps:
  - checkout
  - mvn_build
  - manage_version
  - attach_workspace:
      at: .
  - mvn_verify
  - check_middleware_api_versions
  - when:
      condition: << parameters.include_integrated_frontend_build >>
      steps:
        - frontend_build
        - frontend_test
        - frontend_package
  - mvn_jar_deploy
  - publish_asciidoc
